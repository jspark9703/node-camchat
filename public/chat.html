<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Chat Rooms</title>
	<style>
		body { font-family: Arial, sans-serif; margin: 24px; }
		.container { max-width: 900px; margin: 0 auto; display: grid; grid-template-columns: 260px 1fr; gap: 16px; }
		.sidebar { border: 1px solid #e1e5ea; border-radius: 8px; padding: 12px; }
		.main { border: 1px solid #e1e5ea; border-radius: 8px; padding: 12px; display: grid; grid-template-rows: auto 1fr auto; height: 80vh; }
		.room-item { padding: 8px; border-radius: 6px; cursor: pointer; }
		.room-item.active { background: #eef5ff; }
		.room-item:hover { background: #f5f7fa; }
		.room-header { display: flex; justify-content: space-between; align-items: center; }
		.messages { overflow-y: auto; padding: 8px; background: #fafbfc; border-radius: 8px; margin: 8px 0; }
		.message { margin: 6px 0; padding: 8px; border-radius: 8px; }
		.message .meta { color: #6b7280; font-size: 12px; margin-bottom: 4px; }
		.message div:last-child { word-wrap: break-word; }
		.controls { display: flex; gap: 8px; }
		.controls input { flex: 1; padding: 8px; }
		.controls button { padding: 8px 12px; }
		.topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
		.badge { background: #2563eb; color: white; border-radius: 999px; padding: 2px 8px; font-size: 12px; }
	</style>
</head>
<body>
	<div class="topbar">
		<div>
			<strong id="userLabel">-</strong>
			<span class="badge" id="connBadge">연결 안됨</span>
		</div>
		<div>
			<a href="/" style="margin-right:12px;">홈으로</a>
			<button id="logoutBtn">로그아웃</button>
		</div>
	</div>
	<div class="container">
		<div class="sideba r">
			<h3>채팅방</h3>
			<div class="controls" style="margin-bottom:8px;">
				<input id="createRoomInput" placeholder="새 채팅방 이름" />
				<button id="createRoomBtn">생성</button>
			</div>
			<div id="roomList"></div>
		</div>
		<div class="main">
			<div class="room-header">
				<h3 id="currentRoomTitle">방을 선택하세요</h3>
				<div id="roomActions" style="display:none; gap:8px;">
					<button id="leaveRoomBtn">나가기</button>
					<button id="deleteRoomBtn" style="background-color: #ef4444; color: white;">삭제</button>
				</div>
			</div>
            <div id="videoArea" style="display:none; margin: 8px 0;">
				<div style="display:flex; gap:12px; align-items:flex-start;">
					<div style="flex:0 0 320px;">
						<video id="localVideo" autoplay muted playsinline style="width:320px; height:180px; background:#000; border-radius:8px;"></video>
						<div style="font-size:12px; color:#6b7280; margin-top:4px;">내 카메라 미리보기</div>
					</div>
					<div id="remoteVideos" style="display:flex; flex-wrap:wrap; gap:12px; align-items:flex-start;"></div>
				</div>
            </div>
			<div class="messages" id="messages"></div>
			<div class="controls">
				<input id="messageInput" placeholder="메시지를 입력하세요" />
				<button id="sendBtn">전송</button>
			</div>
		</div>
	</div>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/front.js"></script>
	<script src="/webRTC.js"></script>
	<script src="/socket.js"></script>
</body>
</html>

