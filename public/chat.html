<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Chat Rooms</title>
	<style>
		body { font-family: Arial, sans-serif; margin: 24px; }
		.container { max-width: 900px; margin: 0 auto; display: grid; grid-template-columns: 260px 1fr; gap: 16px; }
		.sidebar { border: 1px solid #e1e5ea; border-radius: 8px; padding: 12px; }
		.main { border: 1px solid #e1e5ea; border-radius: 8px; padding: 12px; display: grid; grid-template-rows: auto 1fr auto; height: 80vh; }
		.room-item { padding: 8px; border-radius: 6px; cursor: pointer; }
		.room-item.active { background: #eef5ff; }
		.room-item:hover { background: #f5f7fa; }
		.room-header { display: flex; justify-content: space-between; align-items: center; }
		.messages { overflow-y: auto; padding: 8px; background: #fafbfc; border-radius: 8px; margin: 8px 0; }
		.message { margin: 6px 0; padding: 8px; border-radius: 8px; }
		.message .meta { color: #6b7280; font-size: 12px; margin-bottom: 4px; }
		.message div:last-child { word-wrap: break-word; }
		.controls { display: flex; gap: 8px; }
		.controls input { flex: 1; padding: 8px; }
		.controls button { padding: 8px 12px; }
		.topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
		.badge { background: #2563eb; color: white; border-radius: 999px; padding: 2px 8px; font-size: 12px; }
		.control-btn { padding: 6px 12px; border: 1px solid #d1d5db; border-radius: 6px; background: white; cursor: pointer; font-size: 13px; }
		.control-btn:hover { background: #f3f4f6; }
		.control-btn.active { background: #ef4444; color: white; border-color: #ef4444; }
		.remote-video-container { position: relative; }
		.remote-video-controls { position: absolute; bottom: 8px; left: 8px; right: 8px; background: rgba(0,0,0,0.6); border-radius: 6px; padding: 6px; display: flex; align-items: center; gap: 8px; }
		.remote-video-controls label { color: white; font-size: 11px; white-space: nowrap; }
		.remote-video-controls input[type="range"] { flex: 1; }
		.remote-video-label { position: absolute; top: 8px; left: 8px; background: rgba(0,0,0,0.6); color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; }
	</style>
</head>
<body>
	<div class="topbar">
		<div>
			<strong id="userLabel">-</strong>
			<span class="badge" id="connBadge">ì—°ê²° ì•ˆë¨</span>
		</div>
		<div>
			<a href="/" style="margin-right:12px;">í™ˆìœ¼ë¡œ</a>
			<button id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
		</div>
	</div>
	<div class="container">
		<div class="sidebar">
			<h3>ì±„íŒ…ë°©</h3>
			<div class="controls" style="margin-bottom:8px;">
				<input id="createRoomInput" placeholder="ìƒˆ ì±„íŒ…ë°© ì´ë¦„" />
				<button id="createRoomBtn">ìƒì„±</button>
			</div>
			<div id="roomList"></div>
		</div>
		<div class="main">
			<div class="room-header">
				<h3 id="currentRoomTitle">ë°©ì„ ì„ íƒí•˜ì„¸ìš”</h3>
				<div id="roomActions" style="display:none; gap:8px;">
					<button id="leaveRoomBtn">ë‚˜ê°€ê¸°</button>
					<button id="deleteRoomBtn" style="background-color: #ef4444; color: white;">ì‚­ì œ</button>
				</div>
			</div>
            <div id="videoArea" style="display:none; margin: 8px 0;">
				<div style="display:flex; gap:12px; align-items:flex-start;">
					<div style="flex:0 0 320px;">
						<video id="localVideo" autoplay muted playsinline style="width:320px; height:180px; background:#000; border-radius:8px;"></video>
						<div style="font-size:12px; color:#6b7280; margin-top:4px;">ë‚´ ì¹´ë©”ë¼ ë¯¸ë¦¬ë³´ê¸°</div>
						<div class="media-controls" style="margin-top:8px; display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
							<button id="toggleCameraBtn" class="control-btn" style="flex:1; min-width:100px;">
								<span id="cameraIcon">ğŸ“¹</span> ì¹´ë©”ë¼ ë„ê¸°
							</button>
							<button id="toggleMicBtn" class="control-btn" style="flex:1; min-width:100px;">
								<span id="micIcon">ğŸ¤</span> ë§ˆì´í¬ ë„ê¸°
							</button>
						</div>
					</div>
					<div id="remoteVideos" style="display:flex; flex-wrap:wrap; gap:12px; align-items:flex-start;"></div>
				</div>
            </div>
			<div class="messages" id="messages"></div>
			<div class="controls">
				<input id="messageInput" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
				<button id="sendBtn">ì „ì†¡</button>
			</div>
		</div>
	</div>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/front.js"></script>
	<script src="/webRTC.js"></script>
	<script src="/socket.js"></script>
</body>
</html>

